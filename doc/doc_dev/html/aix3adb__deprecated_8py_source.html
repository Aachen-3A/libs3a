<!-- HTML header for doxygen 1.8.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.6.1"/>
<!--BEGIN PROJECT_NAME--><title>libs3a: libs3a: python/aix3adb_deprecated.py Source File</title><!--END PROJECT_NAME-->
<!--BEGIN !PROJECT_NAME--><title>libs3a: python/aix3adb_deprecated.py Source File</title><!--END !PROJECT_NAME-->
<link href="$relpath^tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="$relpath^jquery.js"></script>
<script type="text/javascript" src="$relpath^dynsections.js"></script>
$treeview
$search
$mathjax
<link href="$relpath^$stylesheet" rel="stylesheet" type="text/css" />
$extrastylesheet
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->

<!--BEGIN TITLEAREA-->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <!--BEGIN PROJECT_LOGO-->
  <td id="projectlogo"><img alt="Logo" src="$relpath^$projectlogo"/></td>
  <!--END PROJECT_LOGO-->
  <!--BEGIN PROJECT_NAME-->
  <td style="padding-left: 0.5em;">
   <div id="projectname">libs3a
   <!--BEGIN PROJECT_NUMBER-->&#160;<span id="projectnumber"></span><!--END PROJECT_NUMBER-->
   </div>
   <!--BEGIN PROJECT_BRIEF--><div id="projectbrief">$projectbrief</div><!--END PROJECT_BRIEF-->
  </td>
  <!--END PROJECT_NAME-->
  <!--BEGIN !PROJECT_NAME-->
   <!--BEGIN PROJECT_BRIEF-->
    <td style="padding-left: 0.5em;">
    <div id="projectbrief">$projectbrief</div>
    </td>
   <!--END PROJECT_BRIEF-->
  <!--END !PROJECT_NAME-->
  <!--BEGIN DISABLE_INDEX-->
   <!--BEGIN SEARCHENGINE-->
   <td>$searchbox</td>
   <!--END SEARCHENGINE-->
  <!--END DISABLE_INDEX-->
    <td style="padding-left: 20.5em;">
      <div> Choose your branch:</div>
  </td>
  <td style="padding-left: .5em;">
      <div align=right><select id="choose_branch">
        <option value="">Change branch</option>
        <option value="http://aachen-3a.github.io/libs3a/doc/doc_master/html/index.html">master</option>
<option value="http://aachen-3a.github.io/libs3a/doc/doc_dev/html/index.html">dev</option>
        </select>
     </div>   
    <script>
        document.getElementById("choose_branch").onchange = function() {
                if (this.selectedIndex!==0) {
                            window.location.href = this.value;
                            //window.open( this.value ); 
                }        
            };
    </script>
  </td>
  <td style="padding-left: 15.5em;">
      <div> Get back to <a href="https://github.com/Aachen-3A/libs3a">GitHub</a></div>
  </td> 
  <td style="padding-left: 0.2em;">
      <div> or </div>
  </td> 
  <td style="padding-left: 0.2em;">
      <div> <a href="https://github.com/Aachen-3A/TAPAS">TAPAS main page</a></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!--END TITLEAREA-->
<!-- end header part -->
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>python/aix3adb_deprecated.py</h1><a href="aix3adb__deprecated_8py.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a><a class="code" href="namespaceaix3adb__deprecated.html">00001</a> <span class="keyword">import</span> xmlrpclib
<a name="l00002"></a>00002 <span class="keyword">import</span> logging
<a name="l00003"></a>00003 <span class="keyword">import</span> subprocess
<a name="l00004"></a>00004 <span class="keyword">import</span> cookielib
<a name="l00005"></a>00005 <span class="keyword">import</span> urlparse
<a name="l00006"></a>00006 <span class="keyword">import</span> os
<a name="l00007"></a>00007 
<a name="l00008"></a><a class="code" href="namespaceaix3adb__deprecated.html#a539a04e935262c385da35fa6a199c449">00008</a> log = logging.getLogger( <span class="stringliteral">&apos;aix3adb&apos;</span> )
<a name="l00009"></a>00009 
<a name="l00010"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html">00010</a> <span class="keyword">class </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html">aix3adb</a>:
<a name="l00011"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a53332503928a0eb5c61515ef820d23d9">00011</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a53332503928a0eb5c61515ef820d23d9">__init__</a>(self, cookiefilepath=&apos;aix3adb-ssocookie.txt&apos;):
<a name="l00012"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#aa9c7102147d1bb0938f8674ceef292a4">00012</a>         self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#aa9c7102147d1bb0938f8674ceef292a4">cookiefile</a> = os.path.abspath(cookiefilepath)
<a name="l00013"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a5f7bf9b4c4f3e6a0a6aabb7479387958">00013</a>         self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a5f7bf9b4c4f3e6a0a6aabb7479387958">authurl</a> = <span class="stringliteral">&apos;https://cms-project-aachen3a-datasets.web.cern.ch/cms-project-aachen3a-datasets/aix3adb/xmlrpc_auth/x3adb_write.php&apos;</span>
<a name="l00014"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#ac67c4868e8092f0b81b89541599b43bc">00014</a>         self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#ac67c4868e8092f0b81b89541599b43bc">readurl</a> = <span class="stringliteral">&apos;https://cms-project-aachen3a-datasets.web.cern.ch/cms-project-aachen3a-datasets/aix3adb/xmlrpc/x3adb_read.php&apos;</span>
<a name="l00015"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a5e714a6afc54f50488575f25961101f4">00015</a>         self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a5e714a6afc54f50488575f25961101f4">domain</a>  = <span class="stringliteral">&apos;cms-project-aachen3a-datasets.web.cern.ch&apos;</span>
<a name="l00016"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a020daaa68c06977d9810297702e9fedf">00016</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a020daaa68c06977d9810297702e9fedf">authorize</a>(self, username=None, trykerberos=3):
<a name="l00017"></a>00017         <span class="keywordflow">print</span> <span class="stringliteral">&quot;Calling kinit, please enter your CERN password&quot;</span>
<a name="l00018"></a>00018         call = [<span class="stringliteral">&apos;kinit&apos;</span>]
<a name="l00019"></a>00019         <span class="keywordflow">if</span> username <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00020"></a>00020             call.append(username + <span class="stringliteral">&quot;@CERN.CH&quot;</span>)
<a name="l00021"></a>00021         <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(trykerberos):
<a name="l00022"></a>00022             x = subprocess.call(call)
<a name="l00023"></a>00023             log.info(<span class="stringliteral">&quot;Result of kinit: &quot;</span> + str(x))
<a name="l00024"></a>00024             <span class="keywordflow">if</span> x == 0: <span class="keywordflow">break</span>
<a name="l00025"></a>00025             <span class="keywordflow">print</span> <span class="stringliteral">&quot;kinit failed. Please try again.&quot;</span>
<a name="l00026"></a>00026         self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a34ff641f64453f6d9ac09eb07b423b0c">obtainSSOCookies</a>()
<a name="l00027"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a34ff641f64453f6d9ac09eb07b423b0c">00027</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a34ff641f64453f6d9ac09eb07b423b0c">obtainSSOCookies</a>(self):
<a name="l00028"></a>00028         call = [<span class="stringliteral">&apos;env&apos;</span>, <span class="stringliteral">&apos;-i&apos;</span>, <span class="stringliteral">&apos;cern-get-sso-cookie&apos;</span>, <span class="stringliteral">&apos;--krb&apos;</span>, <span class="stringliteral">&apos;--url&apos;</span>, self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a5f7bf9b4c4f3e6a0a6aabb7479387958">authurl</a>, <span class="stringliteral">&apos;--reprocess&apos;</span>, <span class="stringliteral">&apos;--outfile&apos;</span>, self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#aa9c7102147d1bb0938f8674ceef292a4">cookiefile</a>]
<a name="l00029"></a>00029         x = subprocess.call(call)
<a name="l00030"></a>00030         <span class="keywordflow">if</span> x &gt; 0:
<a name="l00031"></a>00031             log.error(<span class="stringliteral">&quot;Failed to retrieve a cookie, authentication not possible&quot;</span>)
<a name="l00032"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a918fbef4a4c25366dfb49ee83df343ec">00032</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a918fbef4a4c25366dfb49ee83df343ec">destroyauth</a>(self):
<a name="l00033"></a>00033         <span class="keywordflow">try</span>:
<a name="l00034"></a>00034             os.remove(self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#aa9c7102147d1bb0938f8674ceef292a4">cookiefile</a>)
<a name="l00035"></a>00035         <span class="keywordflow">except</span>:
<a name="l00036"></a>00036             log.error(<span class="stringliteral">&quot;Failed to remove cookie file&quot;</span>)
<a name="l00037"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#aaaf6b17e3db226d7b7f59b5804079426">00037</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#aaaf6b17e3db226d7b7f59b5804079426">getAuthServerProxy</a>(self):
<a name="l00038"></a>00038         customtransport = transport(self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a5f7bf9b4c4f3e6a0a6aabb7479387958">authurl</a>)
<a name="l00039"></a>00039         customtransport.setcookies(self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#aa9c7102147d1bb0938f8674ceef292a4">cookiefile</a>, self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a5e714a6afc54f50488575f25961101f4">domain</a>)
<a name="l00040"></a>00040         s = xmlrpclib.ServerProxy(self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a5f7bf9b4c4f3e6a0a6aabb7479387958">authurl</a>, customtransport)
<a name="l00041"></a>00041         <span class="keywordflow">return</span> s
<a name="l00042"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a5edf8b589d900c37706b5b0f4cf95e18">00042</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a5edf8b589d900c37706b5b0f4cf95e18">registerMCSample</a>(self, sample):
<a name="l00043"></a>00043         check = self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a86f13823b2f43212e6f790655f42a2e4">checksample</a>(sample)
<a name="l00044"></a>00044         <span class="keywordflow">if</span> check:
<a name="l00045"></a>00045             <span class="keywordflow">return</span> self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a2f9c5bbe3991161d0aa5c827a91261ab">tryServerAuthFunction</a>(self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#acb32bb381ff7be90e140e080811687ab">doRegisterMCSample</a>, sample)
<a name="l00046"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#acb32bb381ff7be90e140e080811687ab">00046</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#acb32bb381ff7be90e140e080811687ab">doRegisterMCSample</a>(self, sample):
<a name="l00047"></a>00047         s = self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#aaaf6b17e3db226d7b7f59b5804079426">getAuthServerProxy</a>()
<a name="l00048"></a>00048         <span class="keywordflow">return</span> s.registerMCSample(sample)
<a name="l00049"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a00f1e6f1bdac197b307eefba2befc777">00049</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a00f1e6f1bdac197b307eefba2befc777">editMCSample</a>(self, id, sample):
<a name="l00050"></a>00050         check = self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a86f13823b2f43212e6f790655f42a2e4">checksample</a>(sample)
<a name="l00051"></a>00051         <span class="keywordflow">if</span> check:
<a name="l00052"></a>00052             <span class="keywordflow">return</span> self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a2f9c5bbe3991161d0aa5c827a91261ab">tryServerAuthFunction</a>(self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#ac67449a0f751fa246b984735952468ab">doEditMCSample</a>, id, sample)
<a name="l00053"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#ac67449a0f751fa246b984735952468ab">00053</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#ac67449a0f751fa246b984735952468ab">doEditMCSample</a>(self, id, sample):
<a name="l00054"></a>00054         s = self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#aaaf6b17e3db226d7b7f59b5804079426">getAuthServerProxy</a>()
<a name="l00055"></a>00055         <span class="keywordflow">return</span> s.editMCSample(id, sample)
<a name="l00056"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a0a287be96b655fd41c3cebc2e611fdbd">00056</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a0a287be96b655fd41c3cebc2e611fdbd">insertOrReplaceMCTags</a>(self, id, tags):
<a name="l00057"></a>00057         s = self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#aaaf6b17e3db226d7b7f59b5804079426">getAuthServerProxy</a>()
<a name="l00058"></a>00058         <span class="keywordflow">return</span> s.insertOrReplaceMCTags(id, tags)
<a name="l00059"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#ad12c07330b027145d72cfce0fafa0db8">00059</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#ad12c07330b027145d72cfce0fafa0db8">registerDataSample</a>(self, sample):
<a name="l00060"></a>00060         check = self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a86f13823b2f43212e6f790655f42a2e4">checksample</a>(sample)
<a name="l00061"></a>00061         <span class="keywordflow">if</span> check:
<a name="l00062"></a>00062             <span class="keywordflow">return</span> self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a2f9c5bbe3991161d0aa5c827a91261ab">tryServerAuthFunction</a>(self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a74f41d840002bdc77458be9156791feb">doRegisterDataSample</a>, sample)
<a name="l00063"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a74f41d840002bdc77458be9156791feb">00063</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a74f41d840002bdc77458be9156791feb">doRegisterDataSample</a>(self, sample):
<a name="l00064"></a>00064         s = self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#aaaf6b17e3db226d7b7f59b5804079426">getAuthServerProxy</a>()
<a name="l00065"></a>00065         <span class="keywordflow">return</span> s.registerDataSample(sample)
<a name="l00066"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#ab4b0c98761ae3b9c5bacc98e4ac04a6f">00066</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#ab4b0c98761ae3b9c5bacc98e4ac04a6f">editDataSample</a>(self, id, sample):
<a name="l00067"></a>00067         check = self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a86f13823b2f43212e6f790655f42a2e4">checksample</a>(sample)
<a name="l00068"></a>00068         <span class="keywordflow">if</span> check:
<a name="l00069"></a>00069             <span class="keywordflow">return</span> self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a2f9c5bbe3991161d0aa5c827a91261ab">tryServerAuthFunction</a>(self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a5021df80a623f7d1c387f06a4cd30677">doEditDataSample</a>, id, sample)
<a name="l00070"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a5021df80a623f7d1c387f06a4cd30677">00070</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a5021df80a623f7d1c387f06a4cd30677">doEditDataSample</a>(self, id, sample):
<a name="l00071"></a>00071         s = self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#aaaf6b17e3db226d7b7f59b5804079426">getAuthServerProxy</a>()
<a name="l00072"></a>00072         <span class="keywordflow">return</span> s.editDataSample(id, sample)
<a name="l00073"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a917b86ee2a6e9d773e9b2908587caabf">00073</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a917b86ee2a6e9d773e9b2908587caabf">getMCSample</a>(self, sampleid):
<a name="l00074"></a>00074         s = xmlrpclib.ServerProxy(self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#ac67c4868e8092f0b81b89541599b43bc">readurl</a>)
<a name="l00075"></a>00075         <span class="keywordflow">return</span> s.getMCSample(sampleid)
<a name="l00076"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a3dbbf9b8675da5d2a8b70b466f9528be">00076</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a3dbbf9b8675da5d2a8b70b466f9528be">getDataSample</a>(self, sampleid):
<a name="l00077"></a>00077         s = xmlrpclib.ServerProxy(self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#ac67c4868e8092f0b81b89541599b43bc">readurl</a>)
<a name="l00078"></a>00078         <span class="keywordflow">return</span> s.getDataSample(sampleid)
<a name="l00079"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#abd1346f421572cf262d263f96551451a">00079</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#abd1346f421572cf262d263f96551451a">searchMCSamples</a>(self, searchdict):
<a name="l00080"></a>00080         s = xmlrpclib.ServerProxy(self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#ac67c4868e8092f0b81b89541599b43bc">readurl</a>)
<a name="l00081"></a>00081         <span class="keywordflow">return</span> s.searchMCSamples(searchdict)
<a name="l00082"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a32c111d347df454d0b1272bc6c366d5b">00082</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a32c111d347df454d0b1272bc6c366d5b">searchDataSamples</a>(self, searchdict):
<a name="l00083"></a>00083         s = xmlrpclib.ServerProxy(self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#ac67c4868e8092f0b81b89541599b43bc">readurl</a>)
<a name="l00084"></a>00084         <span class="keywordflow">return</span> s.searchDataSamples(searchdict)
<a name="l00085"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a4681bd7985c9a141b69557eb3473ba90">00085</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a4681bd7985c9a141b69557eb3473ba90">test</a>(self):
<a name="l00086"></a>00086         s = self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#aaaf6b17e3db226d7b7f59b5804079426">getAuthServerProxy</a>()
<a name="l00087"></a>00087         <span class="keywordflow">return</span> s.test()
<a name="l00088"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a86f13823b2f43212e6f790655f42a2e4">00088</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a86f13823b2f43212e6f790655f42a2e4">checksample</a>(self,sample):
<a name="l00089"></a>00089         msg = <span class="keywordtype">None</span>
<a name="l00090"></a>00090         <span class="keywordflow">if</span> <span class="keywordtype">None</span> <span class="keywordflow">in</span> sample: msg = <span class="stringliteral">&quot;None-item in sample&quot;</span>
<a name="l00091"></a>00091         <span class="keywordflow">if</span> <span class="stringliteral">&quot;tags&quot;</span> <span class="keywordflow">in</span> sample:
<a name="l00092"></a>00092             <span class="keywordflow">if</span> <span class="keywordflow">not</span> type(sample[<span class="stringliteral">&apos;tags&apos;</span>]) == dict: msg = <span class="stringliteral">&quot;Tags is not a dict&quot;</span>
<a name="l00093"></a>00093         <span class="keywordflow">if</span> <span class="stringliteral">&quot;files&quot;</span> <span class="keywordflow">in</span> sample:
<a name="l00094"></a>00094             <span class="keywordflow">if</span> <span class="keywordflow">not</span> type(sample[<span class="stringliteral">&apos;files&apos;</span>]) == list: msg = <span class="stringliteral">&quot;Files is not a list&quot;</span>
<a name="l00095"></a>00095         <span class="keywordflow">if</span> msg <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:
<a name="l00096"></a>00096             log.error(<span class="stringliteral">&quot;Sample failed sanity checks: &quot;</span> + msg)
<a name="l00097"></a>00097             <span class="keywordflow">return</span> <span class="keyword">False</span>
<a name="l00098"></a>00098         <span class="keywordflow">return</span> <span class="keyword">True</span>
<a name="l00099"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a2f9c5bbe3991161d0aa5c827a91261ab">00099</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a2f9c5bbe3991161d0aa5c827a91261ab">tryServerAuthFunction</a>(self, funct, *params):
<a name="l00100"></a>00100         <span class="keywordflow">try</span>:
<a name="l00101"></a>00101             <span class="keywordflow">return</span> funct(*params)
<a name="l00102"></a>00102         <span class="keywordflow">except</span> xmlrpclib.ProtocolError:
<a name="l00103"></a>00103             self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a918fbef4a4c25366dfb49ee83df343ec">destroyauth</a>()
<a name="l00104"></a>00104             self.<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html#a020daaa68c06977d9810297702e9fedf">authorize</a>()
<a name="l00105"></a>00105             <span class="keywordflow">return</span> funct(*params)
<a name="l00106"></a>00106 
<a name="l00107"></a>00107 
<a name="l00108"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adbAuth.html">00108</a> <span class="keyword">class </span><a class="code" href="classaix3adb__deprecated_1_1aix3adbAuth.html">aix3adbAuth</a>(<a class="code" href="classaix3adb__deprecated_1_1aix3adb.html">aix3adb</a>):
<a name="l00109"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adbAuth.html#a4c1116cde08c9ff53c18663c21b1d6e2">00109</a>    <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adbAuth.html#a4c1116cde08c9ff53c18663c21b1d6e2">__init__</a>(self,username=None, trykerberos=3):
<a name="l00110"></a>00110       aix3adb.__init__(self)
<a name="l00111"></a>00111       self.authorize(username, trykerberos)
<a name="l00112"></a><a class="code" href="classaix3adb__deprecated_1_1aix3adbAuth.html#a5a8f306987722e191cbe9d362758090f">00112</a>    <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1aix3adbAuth.html#a5a8f306987722e191cbe9d362758090f">__del__</a>(self):
<a name="l00113"></a>00113       self.destroyauth()
<a name="l00114"></a>00114 
<a name="l00115"></a><a class="code" href="namespaceaix3adb__deprecated.html#a2c7413b875ab23e12fcf9609e19f563f">00115</a> <span class="keyword">def </span><a class="code" href="namespaceaix3adb__deprecated.html#a2c7413b875ab23e12fcf9609e19f563f">main</a>():
<a name="l00116"></a>00116     <span class="keywordflow">print</span> <span class="stringliteral">&quot;This is just a library&quot;</span>
<a name="l00117"></a>00117 
<a name="l00118"></a>00118 
<a name="l00119"></a>00119 
<a name="l00120"></a><a class="code" href="classaix3adb__deprecated_1_1cookietransportrequest.html">00120</a> <span class="keyword">class </span><a class="code" href="classaix3adb__deprecated_1_1cookietransportrequest.html">cookietransportrequest</a>:
<a name="l00121"></a>00121     <span class="stringliteral">&quot;&quot;&quot;A Transport request method that retains cookies over its lifetime.</span>
<a name="l00122"></a>00122 <span class="stringliteral"></span>
<a name="l00123"></a>00123 <span class="stringliteral">    The regular xmlrpclib transports ignore cookies. Which causes</span>
<a name="l00124"></a>00124 <span class="stringliteral">    a bit of a problem when you need a cookie-based login, as with</span>
<a name="l00125"></a>00125 <span class="stringliteral">    the Bugzilla XMLRPC interface.</span>
<a name="l00126"></a>00126 <span class="stringliteral"></span>
<a name="l00127"></a>00127 <span class="stringliteral">    So this is a helper for defining a Transport which looks for</span>
<a name="l00128"></a>00128 <span class="stringliteral">    cookies being set in responses and saves them to add to all future</span>
<a name="l00129"></a>00129 <span class="stringliteral">    requests.</span>
<a name="l00130"></a>00130 <span class="stringliteral">    &quot;&quot;&quot;</span>
<a name="l00131"></a>00131     <span class="comment"># From http://www.lunch.org.uk/wiki/xmlrpccookies</span>
<a name="l00132"></a>00132     <span class="comment"># Inspiration drawn from</span>
<a name="l00133"></a>00133     <span class="comment"># http://blog.godson.in/2010/09/how-to-make-python-xmlrpclib-client.html</span>
<a name="l00134"></a>00134     <span class="comment"># http://www.itkovian.net/base/transport-class-for-pythons-xml-rpc-lib/</span>
<a name="l00135"></a>00135     <span class="comment">#</span>
<a name="l00136"></a>00136     <span class="comment"># Note this must be an old-style class so that __init__ handling works</span>
<a name="l00137"></a>00137     <span class="comment"># correctly with the old-style Transport class. If you make this class</span>
<a name="l00138"></a>00138     <span class="comment"># a new-style class, Transport.__init__() won&apos;t be called.</span>
<a name="l00139"></a>00139 
<a name="l00140"></a><a class="code" href="classaix3adb__deprecated_1_1cookietransportrequest.html#ae73485f343bab9d81a326d9522fb60c7">00140</a>     cookies = []
<a name="l00141"></a><a class="code" href="classaix3adb__deprecated_1_1cookietransportrequest.html#ad23bdc8ca359c308e0a9600ad112995f">00141</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1cookietransportrequest.html#ad23bdc8ca359c308e0a9600ad112995f">setcookies</a>(self,cookiefile, domain):
<a name="l00142"></a><a class="code" href="classaix3adb__deprecated_1_1cookietransportrequest.html#aae36ce114bee46beae11f9646cfa9dae">00142</a>         self.<a class="code" href="classaix3adb__deprecated_1_1cookietransportrequest.html#ae73485f343bab9d81a326d9522fb60c7">cookies</a> = []
<a name="l00143"></a>00143         jar=cookielib.MozillaCookieJar(cookiefile)
<a name="l00144"></a>00144         jar.load(ignore_discard=<span class="keyword">False</span>, ignore_expires=<span class="keyword">False</span>)
<a name="l00145"></a>00145         <span class="keywordflow">for</span> cookie <span class="keywordflow">in</span> jar:
<a name="l00146"></a>00146             <span class="keywordflow">if</span> cookie.domain==domain:
<a name="l00147"></a>00147                 self.<a class="code" href="classaix3adb__deprecated_1_1cookietransportrequest.html#ae73485f343bab9d81a326d9522fb60c7">cookies</a>.append(<span class="stringliteral">&quot;$Version=1; &quot;</span>+cookie.name+<span class="stringliteral">&quot;=&quot;</span>+cookie.value+<span class="stringliteral">&quot;;&quot;</span>)
<a name="l00148"></a><a class="code" href="classaix3adb__deprecated_1_1cookietransportrequest.html#a4d29fe5304e345d78a94e50293130328">00148</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1cookietransportrequest.html#a4d29fe5304e345d78a94e50293130328">send_cookies</a>(self, connection):
<a name="l00149"></a>00149         <span class="keywordflow">if</span> self.<a class="code" href="classaix3adb__deprecated_1_1cookietransportrequest.html#ae73485f343bab9d81a326d9522fb60c7">cookies</a>:
<a name="l00150"></a>00150             <span class="keywordflow">for</span> cookie <span class="keywordflow">in</span> self.<a class="code" href="classaix3adb__deprecated_1_1cookietransportrequest.html#ae73485f343bab9d81a326d9522fb60c7">cookies</a>:
<a name="l00151"></a>00151                 connection.putheader(<span class="stringliteral">&quot;Cookie&quot;</span>, cookie)
<a name="l00152"></a>00152 
<a name="l00153"></a><a class="code" href="classaix3adb__deprecated_1_1cookietransportrequest.html#a79e28ac19c2fd130f07da4f802f95dc3">00153</a>     <span class="keyword">def </span><a class="code" href="classaix3adb__deprecated_1_1cookietransportrequest.html#a79e28ac19c2fd130f07da4f802f95dc3">request</a>(self, host, handler, request_body, verbose=0):
<a name="l00154"></a><a class="code" href="classaix3adb__deprecated_1_1cookietransportrequest.html#ab6e75be18306ee3d170ec8e06530ef2a">00154</a>         self.<a class="code" href="classaix3adb__deprecated_1_1cookietransportrequest.html#ab6e75be18306ee3d170ec8e06530ef2a">verbose</a> = verbose
<a name="l00155"></a>00155 
<a name="l00156"></a>00156         <span class="comment"># issue XML-RPC request</span>
<a name="l00157"></a>00157         h = self.make_connection(host)
<a name="l00158"></a>00158         <span class="keywordflow">if</span> verbose:
<a name="l00159"></a>00159             h.set_debuglevel(1)
<a name="l00160"></a>00160 
<a name="l00161"></a>00161         self.send_request(h, handler, request_body)
<a name="l00162"></a>00162         self.send_host(h, host)
<a name="l00163"></a>00163         self.<a class="code" href="classaix3adb__deprecated_1_1cookietransportrequest.html#a4d29fe5304e345d78a94e50293130328">send_cookies</a>(h)
<a name="l00164"></a>00164         self.send_user_agent(h)
<a name="l00165"></a>00165         self.send_content(h, request_body)
<a name="l00166"></a>00166 
<a name="l00167"></a>00167         <span class="comment"># Deal with differences between Python 2.4-2.6 and 2.7.</span>
<a name="l00168"></a>00168         <span class="comment"># In the former h is a HTTP(S). In the latter it&apos;s a</span>
<a name="l00169"></a>00169         <span class="comment"># HTTP(S)Connection. Luckily, the 2.4-2.6 implementation of</span>
<a name="l00170"></a>00170         <span class="comment"># HTTP(S) has an underlying HTTP(S)Connection, so extract</span>
<a name="l00171"></a>00171         <span class="comment"># that and use it.</span>
<a name="l00172"></a>00172         <span class="keywordflow">try</span>:
<a name="l00173"></a>00173             response = h.getresponse()
<a name="l00174"></a>00174         <span class="keywordflow">except</span> AttributeError:
<a name="l00175"></a>00175             response = h._conn.getresponse()
<a name="l00176"></a>00176 
<a name="l00177"></a>00177         <span class="comment"># Add any cookie definitions to our list.</span>
<a name="l00178"></a>00178         <span class="keywordflow">for</span> header <span class="keywordflow">in</span> response.msg.getallmatchingheaders(<span class="stringliteral">&quot;Set-Cookie&quot;</span>):
<a name="l00179"></a>00179             val = header.split(<span class="stringliteral">&quot;: &quot;</span>, 1)[1]
<a name="l00180"></a>00180             cookie = val.split(<span class="stringliteral">&quot;;&quot;</span>, 1)[0]
<a name="l00181"></a>00181             self.<a class="code" href="classaix3adb__deprecated_1_1cookietransportrequest.html#ae73485f343bab9d81a326d9522fb60c7">cookies</a>.append(cookie)
<a name="l00182"></a>00182 
<a name="l00183"></a>00183         <span class="keywordflow">if</span> response.status != 200:
<a name="l00184"></a>00184             <span class="keywordflow">raise</span> xmlrpclib.ProtocolError(host + handler, response.status,
<a name="l00185"></a>00185                                           response.reason, response.msg.headers)
<a name="l00186"></a>00186 
<a name="l00187"></a>00187         payload = response.read()
<a name="l00188"></a>00188         parser, unmarshaller = self.getparser()
<a name="l00189"></a>00189         parser.feed(payload)
<a name="l00190"></a>00190         parser.close()
<a name="l00191"></a>00191 
<a name="l00192"></a>00192         <span class="keywordflow">return</span> unmarshaller.close()
<a name="l00193"></a>00193 
<a name="l00194"></a><a class="code" href="classaix3adb__deprecated_1_1cookietransport.html">00194</a> <span class="keyword">class </span><a class="code" href="classaix3adb__deprecated_1_1cookietransport.html">cookietransport</a>(<a class="code" href="classaix3adb__deprecated_1_1cookietransportrequest.html">cookietransportrequest</a>, xmlrpclib.Transport):
<a name="l00195"></a>00195     <span class="keywordflow">pass</span>
<a name="l00196"></a>00196 
<a name="l00197"></a><a class="code" href="classaix3adb__deprecated_1_1cookiesafetransport.html">00197</a> <span class="keyword">class </span><a class="code" href="classaix3adb__deprecated_1_1cookiesafetransport.html">cookiesafetransport</a>(<a class="code" href="classaix3adb__deprecated_1_1cookietransportrequest.html">cookietransportrequest</a>, xmlrpclib.SafeTransport):
<a name="l00198"></a>00198     <span class="keywordflow">pass</span>
<a name="l00199"></a>00199 
<a name="l00200"></a><a class="code" href="namespaceaix3adb__deprecated.html#a0fe9d60c9faf66acb0be0d851f0b5008">00200</a> <span class="keyword">def </span><a class="code" href="namespaceaix3adb__deprecated.html#a0fe9d60c9faf66acb0be0d851f0b5008">transport</a>(uri):
<a name="l00201"></a>00201     <span class="stringliteral">&quot;&quot;&quot;Return an appropriate Transport for the URI.</span>
<a name="l00202"></a>00202 <span class="stringliteral"></span>
<a name="l00203"></a>00203 <span class="stringliteral">    If the URI type is https, return a CookieSafeTransport.</span>
<a name="l00204"></a>00204 <span class="stringliteral">    If the type is http, return a CookieTransport.</span>
<a name="l00205"></a>00205 <span class="stringliteral">    &quot;&quot;&quot;</span>
<a name="l00206"></a>00206     <span class="keywordflow">if</span> urlparse.urlparse(uri, <span class="stringliteral">&quot;http&quot;</span>)[0] == <span class="stringliteral">&quot;https&quot;</span>:
<a name="l00207"></a>00207         <span class="keywordflow">return</span> cookiesafetransport()
<a name="l00208"></a>00208     <span class="keywordflow">else</span>:
<a name="l00209"></a>00209         <span class="keywordflow">return</span> cookietransport()
<a name="l00210"></a>00210 
<a name="l00211"></a>00211 <span class="keywordflow">if</span> __name__ == <span class="stringliteral">&quot;__main__&quot;</span>:
<a name="l00212"></a>00212     main()
</pre></div></div>
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<!--BEGIN GENERATE_TREEVIEW-->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    $navpath
    <li class="footer">
      libs3a is part of TAPAS check out all parts of it on 
      <a href="https://github.com/Aachen-3A/TAPAS">github</a>.
      Documentation $generatedby
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="$relpath^doxygen.png" alt="doxygen"/></a> 1.6.1 </li>
  </ul>

</div>
<!--END GENERATE_TREEVIEW-->
<!--BEGIN !GENERATE_TREEVIEW-->
<hr class="footer"/><address class="footer"><small>

$generatedby &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="$relpath^doxygen.png" alt="doxygen"/>
</a> 1.6.1
</small></address>
<!--END !GENERATE_TREEVIEW-->
</body>
</html>
